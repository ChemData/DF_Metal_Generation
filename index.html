<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
	<link href="styles/style.css" rel="stylesheet">
	<script type="text/javascript" src="scripts/simple_funcs.js"></script>
	<script type="text/javascript" src="scripts/distributions.js"></script>
	<script type="text/javascript" src="scripts/materials.js"></script>
	<script type="text/javascript" src="scripts/colors.js"></script>
	<script type="text/javascript" src="scripts/make_materials.js"></script>
	<script type="text/javascript" src="scripts/original_files.js"></script>
  <script type="text/javascript" src="scripts/vanilla_metals.js"></script>
	<title>Dwarf Fortress Metal Generation</title>
  </head>
  <body> 
	<h1>Dwarf Fortress Metal Generator</h1>
  <button class="accordion">What is the purpose of this?</button>
  <div class="panel">
  <p>Once you are an experienced dwarf, the importance of different metals is well known. You know that steel is the best common metal for weapons and armor. You know that nickel is pointless. This mod allows you to generate a whole new set of metals with randomized properties to explore.</p>
  </div>
  <button class="accordion">How do I use this?</button>
  <div class="panel">
  <p>Hit "Make Metals" until you find a set that you like. Then press "Download Raw Files". Deposit the resultant text files into your /raw/objects folder in Dwarf Fortress. One of the files generated is called mod_info.txt and contains an overview of the generated metals and ores. It does not need to be placed in your df folder. Be sure to save a copy of the vanilla files if you want to restore them later.</p>
  </div>
  <button class="accordion">What is a basic metal?</button>
  <div class="panel">
  <p>A pure metal that can be made from a single ingredient. Examples include copper, iron, and lead.</p>
  </div>
  <button class="accordion">What is an alloy?</button>
  <div class="panel">
  <p>An alloy is a metal made from two or more other metals. These include bronze and pewter.</p>
  </div>
  <button class="accordion">What is an advanced metal?</button>
  <div class="panel">
  <p>An advanced metal is made made by combining a metal with a non-metal. In vanilla DF the only advanced metal is steel. Other metals serve as the precursor to advanced metals but are not usable (e.g. pig iron). Advanced metals can require up to six production steps.  Generated advanced metals receive a bonus to their strength based on the rarity of their non-metal ingredients and the length of their production chain.</p>
  </div>
  </div>
  <button class="accordion">What does strength mean?</button>
  <div class="panel">
  <p>Strength is an approximation of the material properties of the metal. Higher strength metals will generally make better weapons and armor. Vanilla strengths range from 0.07 (lead) to 1.21 (copper) to 3.96 (steel). Generated metals with a strength above 1 can be used for weapons/armor and those above 1.7 can even be used for anvils.</p>
  </div>
  <button class="accordion">Why do I need to include adamantine?</button>
  <div class="panel">
  <p>Adamantine holds a unique place in DF. I didn't want to change that.</p>
  </div>
  <button class="accordion">How are the properties generated?</button>
  <div class="panel">
  <p>The basic material properties (Young's modulus, density, etc.) are pulled from a distribution of typical values for metals.</p>
  </div>
  <button class="accordion">Why does this script replace a bunch of vanilla files?</button>
  <div class="panel">
  <p>When you remove the base metals from the game, a bunch of things happen:</p>
  <ul>
      <li>Gold, silver, and copper can no longer be the currencies</li>
      <li>Bronze colossuses cannot be made of bronze</li>
      <li>Iron men cannot be made of iron</li>
      <li>New reactions for making the new metals need to be added to the entities</li>
      <li>etc.</li>
  </ul>
  </div>
  <button class="accordion">Why does my game keep crashing on embark?</button>
  <div class="panel">
  <p>This seems to be an issue with TWBT. It can be avoided by reducing the size of your DF window before embarking. The window can be expanded once you have embarked.</p>
  </div>
  <br></br>
	<label for="basic_metals">Number of basic metals:</label>
	<input type="number" id="basic_metals" name="basic_metals", value=14>
	<br></br>
	<label for="alloys">Number of alloys:</label>
	<input type="number" id="alloys" name="alloys", value=5>
	<br></br>
	<label for="advanced_metals">Number of advanced metals:</label>
	<input type="number" id="advanced_metals" name="advanced_metals", value=2>
	<br></br>
	<label for="vanilla_include">What to include from vanilla:</label>
	<select name="vanilla_include" id="vanilla_include">
	  <option value="basic">Only Adamantine</option>
	  <option value="all">All Metals</option>
	</select>
	<br></br>
	<button onclick="makeMetalsPress()">Make Metals</button>
  <button onclick="downloadFiles()">Download Raw Files</button>
    <table id="basic_table">
    </table>
    <table id="alloy_table">
    </table>
    <table id="advanced_table">
    </table>
    <p id="not_usable">* Intermediate metal that cannot be used to make objects (like pig iron).</p>
    
    <script>
      var acc = document.getElementsByClassName("accordion");
      var i;

      for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var panel = this.nextElementSibling;
          if (panel.style.maxHeight) {
            panel.style.maxHeight = null;
          } else {
            panel.style.maxHeight = panel.scrollHeight + "px";
          } 
        });
      }
  </script>
  </body>
</html>
